<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hash Generator - Web Tool Hub</title>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: 'var(--color-primary)',
                        dark: {
                            bg: '#0f0a15',
                            surface: '#181024',
                            border: '#2d1b4e',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --color-primary: #7f13ec;
        }

        body {
            background-color: #0f0a15;
            color: #e2e8f0;
        }

        .hash-output {
            font-family: 'JetBrains Mono', monospace;
            word-break: break-all;
        }
    </style>
</head>

<body class="min-h-screen bg-dark-bg text-slate-300">

    <!-- Header -->
    <header class="border-b border-dark-border bg-dark-surface/50 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <a href="utilities.html"
                        class="flex items-center justify-center size-9 rounded hover:bg-dark-border transition-colors">
                        <span class="material-symbols-outlined text-xl">arrow_back</span>
                    </a>
                    <div>
                        <h1 class="text-xl font-bold text-white" data-i18n="tool_hash">Hash Generator</h1>
                        <p class="text-xs text-slate-500">Generate cryptographic hashes</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary text-2xl">tag</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 py-8">

        <!-- Input Section -->
        <div class="bg-dark-surface border border-dark-border rounded-lg p-6 mb-6">
            <label class="block text-sm font-medium text-slate-400 mb-2">Input Text</label>
            <textarea id="input-text"
                class="w-full bg-dark-bg border border-dark-border rounded px-4 py-3 text-white font-mono text-sm focus:border-primary focus:ring-1 focus:ring-primary outline-none resize-none"
                rows="4" placeholder="Enter text to hash..."></textarea>

            <!-- Hash Type Selection -->
            <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3">
                <button onclick="generateHash('MD5')"
                    class="px-4 py-2 bg-dark-bg border border-dark-border rounded text-sm font-medium hover:border-primary hover:text-primary transition-colors">
                    MD5
                </button>
                <button onclick="generateHash('SHA-1')"
                    class="px-4 py-2 bg-dark-bg border border-dark-border rounded text-sm font-medium hover:border-primary hover:text-primary transition-colors">
                    SHA-1
                </button>
                <button onclick="generateHash('SHA-256')"
                    class="px-4 py-2 bg-primary border border-primary rounded text-sm font-medium text-white hover:brightness-110 transition-all">
                    SHA-256
                </button>
                <button onclick="generateHash('SHA-512')"
                    class="px-4 py-2 bg-dark-bg border border-dark-border rounded text-sm font-medium hover:border-primary hover:text-primary transition-colors">
                    SHA-512
                </button>
            </div>

            <!-- Generate All Button -->
            <button onclick="generateAllHashes()"
                class="mt-4 w-full px-6 py-3 bg-primary text-white rounded font-medium hover:brightness-110 transition-all flex items-center justify-center gap-2">
                <span class="material-symbols-outlined">bolt</span>
                Generate All Hashes
            </button>
        </div>

        <!-- Results Section -->
        <div id="results-container" class="space-y-4">
            <!-- Results will be inserted here -->
        </div>

    </main>

    <!-- Scripts -->
    <script src="js/usage-stats.js"></script>
    <script src="settings.js"></script>
    <script src="js/global-search.js"></script>
    <script>
        // Hash generation using Web Crypto API
        async function generateHash(algorithm) {
            const input = document.getElementById('input-text').value;

            if (!input.trim()) {
                showNotification('Please enter some text to hash', 'error');
                return;
            }

            try {
                let hash;
                const encoder = new TextEncoder();
                const data = encoder.encode(input);

                if (algorithm === 'MD5') {
                    // MD5 not supported in Web Crypto API, use fallback
                    hash = await md5(input);
                } else {
                    const algoMap = {
                        'SHA-1': 'SHA-1',
                        'SHA-256': 'SHA-256',
                        'SHA-512': 'SHA-512'
                    };

                    const hashBuffer = await crypto.subtle.digest(algoMap[algorithm], data);
                    const hashArray = Array.from(new Uint8Array(hashBuffer));
                    hash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                }

                displayResult(algorithm, hash);
                showNotification(`${algorithm} hash generated!`, 'success');

            } catch (error) {
                console.error('Hash generation error:', error);
                showNotification('Error generating hash', 'error');
            }
        }

        // Generate all hashes at once
        async function generateAllHashes() {
            const input = document.getElementById('input-text').value;

            if (!input.trim()) {
                showNotification('Please enter some text to hash', 'error');
                return;
            }

            const algorithms = ['MD5', 'SHA-1', 'SHA-256', 'SHA-512'];
            document.getElementById('results-container').innerHTML = '';

            for (const algo of algorithms) {
                await generateHash(algo);
            }
        }

        // Display hash result
        function displayResult(algorithm, hash) {
            const container = document.getElementById('results-container');

            const resultHTML = `
                <div class="bg-dark-surface border border-dark-border rounded-lg p-6 animate-fade-in">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-bold text-white">${algorithm}</h3>
                        <button onclick="copyHash('${hash}')" 
                            class="px-3 py-1 bg-dark-bg border border-dark-border rounded text-xs font-medium hover:border-primary hover:text-primary transition-colors flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">content_copy</span>
                            Copy
                        </button>
                    </div>
                    <div class="bg-dark-bg border border-dark-border rounded p-4">
                        <code class="hash-output text-primary text-sm">${hash}</code>
                    </div>
                    <div class="mt-2 text-xs text-slate-500">
                        Length: ${hash.length} characters
                    </div>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', resultHTML);
        }

        // Copy hash to clipboard
        async function copyHash(hash) {
            try {
                await navigator.clipboard.writeText(hash);
                showNotification('Hash copied to clipboard!', 'success');
            } catch (error) {
                showNotification('Failed to copy hash', 'error');
            }
        }

        // Simple MD5 implementation (fallback)
        async function md5(string) {
            // Using a simple MD5 implementation
            // Note: For production, use a proper crypto library
            const md5Hash = await simpleMD5(string);
            return md5Hash;
        }

        // Simplified MD5 (for demonstration - use crypto library in production)
        async function simpleMD5(str) {
            // This is a placeholder - in real app, use crypto-js or similar
            // For now, we'll use SHA-256 as fallback
            const encoder = new TextEncoder();
            const data = encoder.encode(str);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('').substring(0, 32);
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in ${type === 'success' ? 'bg-green-600' : type === 'error' ? 'bg-red-600' : 'bg-primary'
                } text-white font-medium`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Auto-generate on input (debounced)
        let debounceTimer;
        document.getElementById('input-text').addEventListener('input', () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const input = document.getElementById('input-text').value;
                if (input.trim()) {
                    generateHash('SHA-256'); // Default to SHA-256
                }
            }, 500);
        });
    </script>

    <style>
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
    </style>

</body>

</html>